<%- include('partials/header') %>

<section class="page-header">
  <div>
    <p class="page-eyebrow"><%= t('competitions.eyebrow') %></p>
    <h2 class="page-title"><%= t('competitions.title') %></h2>
  </div>
  <p class="page-description"><%= t('competitions.description') %></p>
</section>

<div class="chart-wrapper">
  <div class="chart-head">
    <p class="chart-label"><%= t('competitions.chart.label') %></p>
    <h3 class="chart-title"><%= t('competitions.chart.title') %></h3>
  </div>
  <svg id="competitionChart"></svg>
</div>

<section class="filters-panel">
  <h3 style="margin:0 0 0.6rem 0"><%= t('competitions.filters.title') %></h3>
  <div>
    <label for="searchCompetition"><%= t('competitions.filters.searchLabel') %></label>
    <input type="text" id="searchCompetition" placeholder="<%= t('competitions.filters.searchPlaceholder') %>" />
  </div>
</section>

<div class="table-container">
  <table role="grid">
    <thead>
      <tr>
        <th><%= t('competitions.table.headers.id') %></th>
        <th><%= t('competitions.table.headers.title') %></th>
        <th><%= t('competitions.table.headers.slug') %></th>
        <th><%= t('competitions.table.headers.description') %></th>
        <th><%= t('competitions.table.headers.start') %></th>
        <th><%= t('competitions.table.headers.end') %></th>
      </tr>
    </thead>
    <tbody id="competitionsTableBody">
      <% competitions.forEach(c => { %>
        <tr class="competition-row" data-search="<%= (c.title + ' ' + c.slug).toLowerCase() %>">
          <td><%= c.id %></td>
          <td><strong><%= c.title %></strong></td>
          <td><code><%= c.slug %></code></td>
          <td><%= c.description || t('common.notAvailable') %></td>
          <td><%= c.start_date ? new Date(c.start_date).toLocaleDateString(locale || 'es-ES') : t('common.notAvailable') %></td>
          <td><%= c.end_date ? new Date(c.end_date).toLocaleDateString(locale || 'es-ES') : t('common.notAvailable') %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<%- include('partials/footer') %>
