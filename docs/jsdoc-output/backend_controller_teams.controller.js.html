<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: backend/controller/teams.controller.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-context_AuthContext.html">context/AuthContext</a></div><div class="sidebar-section-children"><a href="module-context_SocketContext.html">context/SocketContext</a></div><div class="sidebar-section-children"><a href="module-hooks_useApi.html">hooks/useApi</a></div><div class="sidebar-section-children"><a href="module-hooks_useAuth.html">hooks/useAuth</a></div><div class="sidebar-section-children"><a href="module-hooks_useTeams.html">hooks/useTeams</a></div><div class="sidebar-section-children"><a href="module-models_Competition.html">models/Competition</a></div><div class="sidebar-section-children"><a href="module-models_Team.html">models/Team</a></div><div class="sidebar-section-children"><a href="module-models_User.html">models/User</a></div><div class="sidebar-section-children"><a href="module-utils_push.html">utils/push</a></div><div class="sidebar-section-children"><a href="module-utils_scheduler.html">utils/scheduler</a></div><div class="sidebar-section-children"><a href="module-utils_systemLogger.html">utils/systemLogger</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-utils_systemLogger-SystemLogger.html">SystemLogger</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#NotificationMeta">NotificationMeta</a></div><div class="sidebar-section-children"><a href="global.html#PushPayload">PushPayload</a></div><div class="sidebar-section-children"><a href="global.html#RateLimitOptions">RateLimitOptions</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#SendEmailResult">SendEmailResult</a></div><div class="sidebar-section-children"><a href="global.html#SessionUser">SessionUser</a></div><div class="sidebar-section-children"><a href="global.html#UploadFieldDefinition">UploadFieldDefinition</a></div><div class="sidebar-section-children"><a href="global.html#UploadedFileInfo">UploadedFileInfo</a></div><div class="sidebar-section-children"><a href="global.html#acceptInvite">acceptInvite</a></div><div class="sidebar-section-children"><a href="global.html#addComment">addComment</a></div><div class="sidebar-section-children"><a href="global.html#addFavoriteCompetition">addFavoriteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#addLdapUser">addLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#apiRequest">apiRequest</a></div><div class="sidebar-section-children"><a href="global.html#approveJoinRequest">approveJoinRequest</a></div><div class="sidebar-section-children"><a href="global.html#approveRegistration">approveRegistration</a></div><div class="sidebar-section-children"><a href="global.html#canUseNotifications">canUseNotifications</a></div><div class="sidebar-section-children"><a href="global.html#changePassword">changePassword</a></div><div class="sidebar-section-children"><a href="global.html#cn">cn</a></div><div class="sidebar-section-children"><a href="global.html#createCountry">createCountry</a></div><div class="sidebar-section-children"><a href="global.html#createGalleryItem">createGalleryItem</a></div><div class="sidebar-section-children"><a href="global.html#createLogEntry">createLogEntry</a></div><div class="sidebar-section-children"><a href="global.html#createNotification">createNotification</a></div><div class="sidebar-section-children"><a href="global.html#createPost">createPost</a></div><div class="sidebar-section-children"><a href="global.html#createRegistration">createRegistration</a></div><div class="sidebar-section-children"><a href="global.html#createSponsor">createSponsor</a></div><div class="sidebar-section-children"><a href="global.html#createStream">createStream</a></div><div class="sidebar-section-children"><a href="global.html#createTeam">createTeam</a></div><div class="sidebar-section-children"><a href="global.html#createTeamMember">createTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#createUser">createUser</a></div><div class="sidebar-section-children"><a href="global.html#declineInvite">declineInvite</a></div><div class="sidebar-section-children"><a href="global.html#decodeIfBase64">decodeIfBase64</a></div><div class="sidebar-section-children"><a href="global.html#deleteCompetition">deleteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#deleteCountry">deleteCountry</a></div><div class="sidebar-section-children"><a href="global.html#deleteGalleryItem">deleteGalleryItem</a></div><div class="sidebar-section-children"><a href="global.html#deleteKey">deleteKey</a></div><div class="sidebar-section-children"><a href="global.html#deleteLdapUser">deleteLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#deleteLogEntry">deleteLogEntry</a></div><div class="sidebar-section-children"><a href="global.html#deleteMedia">deleteMedia</a></div><div class="sidebar-section-children"><a href="global.html#deleteNotification">deleteNotification</a></div><div class="sidebar-section-children"><a href="global.html#deleteOldLogs">deleteOldLogs</a></div><div class="sidebar-section-children"><a href="global.html#deletePost">deletePost</a></div><div class="sidebar-section-children"><a href="global.html#deleteRegistration">deleteRegistration</a></div><div class="sidebar-section-children"><a href="global.html#deleteRobotFile">deleteRobotFile</a></div><div class="sidebar-section-children"><a href="global.html#deleteSelf">deleteSelf</a></div><div class="sidebar-section-children"><a href="global.html#deleteSponsor">deleteSponsor</a></div><div class="sidebar-section-children"><a href="global.html#deleteStream">deleteStream</a></div><div class="sidebar-section-children"><a href="global.html#deleteTeam">deleteTeam</a></div><div class="sidebar-section-children"><a href="global.html#deleteTeamMember">deleteTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#deleteUser">deleteUser</a></div><div class="sidebar-section-children"><a href="global.html#emitToUser">emitToUser</a></div><div class="sidebar-section-children"><a href="global.html#exportRegistrationsCSV">exportRegistrationsCSV</a></div><div class="sidebar-section-children"><a href="global.html#forgotPassword">forgotPassword</a></div><div class="sidebar-section-children"><a href="global.html#form">form</a></div><div class="sidebar-section-children"><a href="global.html#getApiOrigin">getApiOrigin</a></div><div class="sidebar-section-children"><a href="global.html#getComments">getComments</a></div><div class="sidebar-section-children"><a href="global.html#getCompetitionById">getCompetitionById</a></div><div class="sidebar-section-children"><a href="global.html#getCompetitions">getCompetitions</a></div><div class="sidebar-section-children"><a href="global.html#getCountries">getCountries</a></div><div class="sidebar-section-children"><a href="global.html#getCountryById">getCountryById</a></div><div class="sidebar-section-children"><a href="global.html#getFileInfo">getFileInfo</a></div><div class="sidebar-section-children"><a href="global.html#getIO">getIO</a></div><div class="sidebar-section-children"><a href="global.html#getKeyInfo">getKeyInfo</a></div><div class="sidebar-section-children"><a href="global.html#getMediaById">getMediaById</a></div><div class="sidebar-section-children"><a href="global.html#getMembershipStatus">getMembershipStatus</a></div><div class="sidebar-section-children"><a href="global.html#getMessages">getMessages</a></div><div class="sidebar-section-children"><a href="global.html#getMyTeam">getMyTeam</a></div><div class="sidebar-section-children"><a href="global.html#getNotificationById">getNotificationById</a></div><div class="sidebar-section-children"><a href="global.html#getNotifications">getNotifications</a></div><div class="sidebar-section-children"><a href="global.html#getOverview">getOverview</a></div><div class="sidebar-section-children"><a href="global.html#getPostById">getPostById</a></div><div class="sidebar-section-children"><a href="global.html#getPosts">getPosts</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrationById">getRegistrationById</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrationStats">getRegistrationStats</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrations">getRegistrations</a></div><div class="sidebar-section-children"><a href="global.html#getResendClient">getResendClient</a></div><div class="sidebar-section-children"><a href="global.html#getRobotFiles">getRobotFiles</a></div><div class="sidebar-section-children"><a href="global.html#getSelf">getSelf</a></div><div class="sidebar-section-children"><a href="global.html#getSponsorById">getSponsorById</a></div><div class="sidebar-section-children"><a href="global.html#getSponsors">getSponsors</a></div><div class="sidebar-section-children"><a href="global.html#getStreamById">getStreamById</a></div><div class="sidebar-section-children"><a href="global.html#getStreams">getStreams</a></div><div class="sidebar-section-children"><a href="global.html#getSystemLogById">getSystemLogById</a></div><div class="sidebar-section-children"><a href="global.html#getSystemLogs">getSystemLogs</a></div><div class="sidebar-section-children"><a href="global.html#getSystemStats">getSystemStats</a></div><div class="sidebar-section-children"><a href="global.html#getTeamById">getTeamById</a></div><div class="sidebar-section-children"><a href="global.html#getTeamLogs">getTeamLogs</a></div><div class="sidebar-section-children"><a href="global.html#getTeamMemberById">getTeamMemberById</a></div><div class="sidebar-section-children"><a href="global.html#getTeamMembers">getTeamMembers</a></div><div class="sidebar-section-children"><a href="global.html#getTeams">getTeams</a></div><div class="sidebar-section-children"><a href="global.html#getUserById">getUserById</a></div><div class="sidebar-section-children"><a href="global.html#getUsers">getUsers</a></div><div class="sidebar-section-children"><a href="global.html#getUsersByRole">getUsersByRole</a></div><div class="sidebar-section-children"><a href="global.html#getUsersTimeline">getUsersTimeline</a></div><div class="sidebar-section-children"><a href="global.html#getVapidPublicKey">getVapidPublicKey</a></div><div class="sidebar-section-children"><a href="global.html#handleUploadErrors">handleUploadErrors</a></div><div class="sidebar-section-children"><a href="global.html#inviteToTeam">inviteToTeam</a></div><div class="sidebar-section-children"><a href="global.html#leaveTeam">leaveTeam</a></div><div class="sidebar-section-children"><a href="global.html#list">list</a></div><div class="sidebar-section-children"><a href="global.html#listFavoriteCompetitions">listFavoriteCompetitions</a></div><div class="sidebar-section-children"><a href="global.html#listGallery">listGallery</a></div><div class="sidebar-section-children"><a href="global.html#listJoinRequests">listJoinRequests</a></div><div class="sidebar-section-children"><a href="global.html#listKeys">listKeys</a></div><div class="sidebar-section-children"><a href="global.html#listLdapUsers">listLdapUsers</a></div><div class="sidebar-section-children"><a href="global.html#login">login</a></div><div class="sidebar-section-children"><a href="global.html#logout">logout</a></div><div class="sidebar-section-children"><a href="global.html#me">me</a></div><div class="sidebar-section-children"><a href="global.html#normalizeBase">normalizeBase</a></div><div class="sidebar-section-children"><a href="global.html#parseResponse">parseResponse</a></div><div class="sidebar-section-children"><a href="global.html#redirectIfAuthenticated">redirectIfAuthenticated</a></div><div class="sidebar-section-children"><a href="global.html#reducer">reducer</a></div><div class="sidebar-section-children"><a href="global.html#register">register</a></div><div class="sidebar-section-children"><a href="global.html#registerTeamInCompetition">registerTeamInCompetition</a></div><div class="sidebar-section-children"><a href="global.html#rejectRegistration">rejectRegistration</a></div><div class="sidebar-section-children"><a href="global.html#remove">remove</a></div><div class="sidebar-section-children"><a href="global.html#removeFavoriteCompetition">removeFavoriteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#renderAddLdapUser">renderAddLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#renderEditLdapUser">renderEditLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#requestJoinTeam">requestJoinTeam</a></div><div class="sidebar-section-children"><a href="global.html#requestNotificationPermission">requestNotificationPermission</a></div><div class="sidebar-section-children"><a href="global.html#requireAdminSession">requireAdminSession</a></div><div class="sidebar-section-children"><a href="global.html#requireOwnership">requireOwnership</a></div><div class="sidebar-section-children"><a href="global.html#requireRole">requireRole</a></div><div class="sidebar-section-children"><a href="global.html#resetPassword">resetPassword</a></div><div class="sidebar-section-children"><a href="global.html#resolveMediaUrl">resolveMediaUrl</a></div><div class="sidebar-section-children"><a href="global.html#save">save</a></div><div class="sidebar-section-children"><a href="global.html#searchUsers">searchUsers</a></div><div class="sidebar-section-children"><a href="global.html#sendMessage">sendMessage</a></div><div class="sidebar-section-children"><a href="global.html#sendPasswordResetCodeEmail">sendPasswordResetCodeEmail</a></div><div class="sidebar-section-children"><a href="global.html#sendTestPush">sendTestPush</a></div><div class="sidebar-section-children"><a href="global.html#setIO">setIO</a></div><div class="sidebar-section-children"><a href="global.html#showNotification">showNotification</a></div><div class="sidebar-section-children"><a href="global.html#subscribePush">subscribePush</a></div><div class="sidebar-section-children"><a href="global.html#subscribeToPush">subscribeToPush</a></div><div class="sidebar-section-children"><a href="global.html#toggleFileVisibility">toggleFileVisibility</a></div><div class="sidebar-section-children"><a href="global.html#toggleLike">toggleLike</a></div><div class="sidebar-section-children"><a href="global.html#togglePin">togglePin</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribeFromPush">unsubscribeFromPush</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribePush">unsubscribePush</a></div><div class="sidebar-section-children"><a href="global.html#updateCompetition">updateCompetition</a></div><div class="sidebar-section-children"><a href="global.html#updateCountry">updateCountry</a></div><div class="sidebar-section-children"><a href="global.html#updateLdapUser">updateLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#updateNotification">updateNotification</a></div><div class="sidebar-section-children"><a href="global.html#updatePost">updatePost</a></div><div class="sidebar-section-children"><a href="global.html#updateRegistration">updateRegistration</a></div><div class="sidebar-section-children"><a href="global.html#updateSelf">updateSelf</a></div><div class="sidebar-section-children"><a href="global.html#updateSponsor">updateSponsor</a></div><div class="sidebar-section-children"><a href="global.html#updateStream">updateStream</a></div><div class="sidebar-section-children"><a href="global.html#updateTeam">updateTeam</a></div><div class="sidebar-section-children"><a href="global.html#updateTeamMember">updateTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#updateUser">updateUser</a></div><div class="sidebar-section-children"><a href="global.html#uploadMedia">uploadMedia</a></div><div class="sidebar-section-children"><a href="global.html#uploadMiddleware">uploadMiddleware</a></div><div class="sidebar-section-children"><a href="global.html#uploadRobotFile">uploadRobotFile</a></div><div class="sidebar-section-children"><a href="global.html#useCountries">useCountries</a></div><div class="sidebar-section-children"><a href="global.html#useToast">useToast</a></div><div class="sidebar-section-children"><a href="global.html#validatePasswordStrength">validatePasswordStrength</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">backend_controller_teams.controller.js</h1></header><article><pre class="prettyprint source lang-js"><code>/**
 * @fileoverview Team management endpoints.
 *
 * Includes team CRUD, invitations (accept/decline), join requests, membership
 * status helpers, and competition registration.
 */

import db from '../models/index.js';
const { Team, User, Country, TeamMembers, TeamInvite, TeamJoinRequest, Registration, Competition, Notification } = db;
import { Op } from 'sequelize';
import { getFileInfo } from '../middleware/upload.middleware.js';
import { v4 as uuidv4 } from 'uuid';
import { emitToUser } from '../utils/realtime.js';

/**
 * Create a new team (authenticated).
 *
 * Enforces the single-team membership rule for the creator. Also creates the
 * creator's `TeamMembers` record with role `owner`.
 *
 * @route POST /api/teams
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const createTeam = async (req, res) => {
  try {
    // The creator is the authenticated user
    const created_by_user_id = req.user?.id;
    if (!created_by_user_id) return res.status(401).json({ error: 'No autorizado' });

    // A user can only belong to ONE team (enforced by index and app logic)
    const existingMembership = await TeamMembers.findOne({ where: { user_id: created_by_user_id, left_at: null } }).catch(() => null);
    if (existingMembership) return res.status(400).json({ error: 'Ya perteneces a un equipo' });

    // Validate foreign keys before attempting insert to return a friendly 400
    const { country_id } = req.body;
    if (country_id) {
      // Country may be optional in some deployments
      if (Country) {
        const c = await Country.findByPk(country_id);
        if (!c) return res.status(400).json({ error: `country_id '${country_id}' does not exist` });
      }
    }

    const teamData = { ...req.body, created_by_user_id };

    // Handle file upload
    const fileInfo = getFileInfo(req);
    if (fileInfo) {
      teamData.logo_url = fileInfo.url;
    }

    const team = await Team.create(teamData);
    // Make creator the owner in TeamMembers
    await TeamMembers.create({ team_id: team.id, user_id: created_by_user_id, role: 'owner', joined_at: new Date(), left_at: null });
    // optional: notify creator (could be useful for consistency)
    try {
      const notif = await Notification.create({
        user_id: created_by_user_id,
        title: 'Equipo creado',
        message: `Has creado el equipo ${team.name}`,
        type: 'team_invite'
      });
      emitToUser(created_by_user_id, 'notification', notif.toJSON());
    } catch (_) {}
    res.status(201).json(team);
  } catch (err) {
    // Map common DB constraint errors to 400 for better client experience
    if (err &amp;&amp; (err.name === 'SequelizeForeignKeyConstraintError' || err.name === 'SequelizeUniqueConstraintError')) {
      return res.status(400).json({ error: err.message });
    }
    res.status(500).json({ error: err.message });
  }
};

/**
 * List teams with optional filtering.
 *
 * @route GET /api/teams
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const getTeams = async (req, res) => {
  try {
    const { q, country_id, limit = 50, offset = 0, sort = 'name', order = 'ASC', withCount } = req.query;
    const where = {};
    if (q) where.name = { [Op.like]: `%${q}%` };
    if (country_id) where.country_id = country_id;

    const opts = {
      where,
      limit: Number(limit),
      offset: Number(offset),
      order: [[sort, String(order).toUpperCase() === 'DESC' ? 'DESC' : 'ASC']]
    };

    if (String(withCount) === 'true') {
      const { count, rows } = await Team.findAndCountAll(opts);
      return res.json({ items: rows, total: count });
    }

    const items = await Team.findAll(opts);
    return res.json(items);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};

/**
 * Get a team by id.
 *
 * @route GET /api/teams/:id
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const getTeamById = async (req, res) => {
  try {
    const item = await Team.findByPk(req.params.id);
    if (!item) return res.status(404).json({ error: 'Team not found' });
    res.json(item);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};

/**
 * Update a team by id (owner only via middleware).
 *
 * Supports optional logo upload.
 *
 * @route PUT /api/teams/:id
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const updateTeam = async (req, res) => {
  try {
    const updates = { ...req.body };

    // Handle file upload
    const fileInfo = getFileInfo(req);
    if (fileInfo) {
      updates.logo_url = fileInfo.url;
    }

    const [updated] = await Team.update(updates, { where: { id: req.params.id } });
    // Note: updated might be 0 if no changes were made, so we don't return 404 here.
    
    const updatedItem = await Team.findByPk(req.params.id);
    if (!updatedItem) return res.status(404).json({ error: 'Team not found' });
    res.json(updatedItem);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};

/**
 * Delete a team by id (owner only via middleware).
 *
 * @route DELETE /api/teams/:id
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const deleteTeam = async (req, res) => {
  try {
    const deleted = await Team.destroy({ where: { id: req.params.id } });
    if (!deleted) return res.status(404).json({ error: 'Team not found' });
    res.json({ message: 'Team deleted' });
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};

/**
 * Creates a team invitation.
 *
 * The requester must be the team owner (enforced by `requireOwnership('Team')`).
 * If the target user exists, a `team_invite` notification is created with a `meta.invite_token`
 * so the invite can be accepted/declined from the UI.
 *
 * @route POST /api/teams/:id/invite
 * @param {Express.Request} req Express request.
 * @param {Express.Response} res Express response.
 * @returns {Promise&lt;void>}
 */
export const inviteToTeam = async (req, res) => {
  try {
    const teamId = Number(req.params.id);
    const team = await Team.findByPk(teamId);
    if (!team) return res.status(404).json({ error: 'Team not found' });

    // requireOwnership middleware already checked ownership by created_by_user_id
    const { email, username, user_id, expires_in_hours = 168 } = req.body || {};
    if (!email &amp;&amp; !username &amp;&amp; !user_id) return res.status(400).json({ error: 'email o username requerido' });

    let targetUserId = user_id || null;
    if (!targetUserId &amp;&amp; (username || email)) {
      const where = username ? { username } : { email };
      const found = await User.findOne({ where });
      if (!found &amp;&amp; username) return res.status(400).json({ error: `username '${username}' no existe` });
      if (!found &amp;&amp; email) {
        // Invite by email only (no user yet) is allowed
      } else if (found) {
        targetUserId = found.id;
      }
    }

    if (targetUserId) {
      const u = await User.findByPk(targetUserId);
      if (!u) return res.status(400).json({ error: 'Usuario no existe' });
      // user must not already belong to a team
      const exists = await TeamMembers.findOne({ where: { user_id: targetUserId, left_at: null } });
      if (exists) return res.status(400).json({ error: 'El usuario ya pertenece a un equipo' });
    }

    const token = uuidv4();
    const expires_at = new Date(Date.now() + Number(expires_in_hours) * 3600 * 1000);
    const invite = await TeamInvite.create({ team_id: teamId, email: email || null, user_id: targetUserId || null, token, status: 'pending', expires_at });

    // Realtime + Notification to invited user (if user_id provided)
    if (targetUserId) {
      try {
        const notif = await Notification.create({
          user_id: targetUserId,
          title: 'Invitación de equipo',
          message: `Has sido invitado a unirte a ${team.name}`,
          type: 'team_invite',
          meta: {
            kind: 'team_invite',
            invite_token: token,
            team_id: teamId,
            team_name: team.name
          }
        });
        emitToUser(targetUserId, 'notification', notif.toJSON());
      } catch (_) {}
    }

    return res.status(201).json({ token: invite.token, invite });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Declines a team invitation by token.
 *
 * If the invitation is bound to a specific `user_id`, the authenticated user must match.
 *
 * @route POST /api/teams/invitations/decline
 * @param {Express.Request} req Express request.
 * @param {Express.Response} res Express response.
 * @returns {Promise&lt;void>}
 */
export const declineInvite = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const { token } = req.body || {};
    if (!token) return res.status(400).json({ error: 'token requerido' });

    const invite = await TeamInvite.findOne({ where: { token } });
    if (!invite) return res.status(404).json({ error: 'Invitación no encontrada' });
    if (invite.status !== 'pending') return res.status(400).json({ error: 'Invitación no disponible' });
    if (invite.expires_at &amp;&amp; new Date(invite.expires_at).getTime() &lt; Date.now()) return res.status(400).json({ error: 'Invitación expirada' });

    // If the invite is tied to a specific user, enforce it.
    if (invite.user_id &amp;&amp; invite.user_id !== userId) {
      return res.status(403).json({ error: 'No autorizado' });
    }

    await invite.update({ status: 'declined' });

    // Notify team owner
    try {
      const team = await Team.findByPk(invite.team_id);
      if (team) {
        const notif = await Notification.create({
          user_id: team.created_by_user_id,
          title: 'Invitación rechazada',
          message: `Un usuario ha rechazado la invitación a ${team.name}`,
          type: 'team_invite'
        });
        emitToUser(team.created_by_user_id, 'notification', notif.toJSON());
      }
    } catch (_) {}

    return res.json({ success: true });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Accepts a team invitation by token.
 *
 * Enforces the single-team membership rule.
 *
 * @route POST /api/teams/invitations/accept
 * @param {Express.Request} req Express request.
 * @param {Express.Response} res Express response.
 * @returns {Promise&lt;void>}
 */
export const acceptInvite = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const { token } = req.body || {};
    if (!token) return res.status(400).json({ error: 'token requerido' });

    const invite = await TeamInvite.findOne({ where: { token } });
    if (!invite) return res.status(404).json({ error: 'Invitación no encontrada' });
    if (invite.status !== 'pending') return res.status(400).json({ error: 'Invitación no disponible' });
    if (invite.expires_at &amp;&amp; new Date(invite.expires_at).getTime() &lt; Date.now()) return res.status(400).json({ error: 'Invitación expirada' });

    // Check single-team rule
    const existing = await TeamMembers.findOne({ where: { user_id: userId, left_at: null } });
    if (existing) return res.status(400).json({ error: 'Ya perteneces a un equipo' });

    await TeamMembers.create({ team_id: invite.team_id, user_id: userId, role: 'member', joined_at: new Date(), left_at: null });
    await invite.update({ status: 'accepted' });

    // Notify team owner
    try {
      const team = await Team.findByPk(invite.team_id);
      if (team) {
        const notif = await Notification.create({
          user_id: team.created_by_user_id,
          title: 'Invitación aceptada',
          message: `Un usuario se ha unido a ${team.name}`,
          type: 'team_invite'
        });
        emitToUser(team.created_by_user_id, 'notification', notif.toJSON());
      }
    } catch (_) {}
    return res.json({ success: true });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Create a request to join a team.
 *
 * @route POST /api/teams/:id/requests
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const requestJoinTeam = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const teamId = Number(req.params.id);
    const team = await Team.findByPk(teamId);
    if (!team) return res.status(404).json({ error: 'Team not found' });

    const existingMembership = await TeamMembers.findOne({ where: { user_id: userId, left_at: null } });
    if (existingMembership) return res.status(400).json({ error: 'Ya perteneces a un equipo' });

    const reqRow = await TeamJoinRequest.create({ team_id: teamId, user_id: userId, status: 'pending' });

    // Notify team owner about the join request
    try {
      const notif = await Notification.create({
        user_id: team.created_by_user_id,
        title: 'Solicitud de unión',
        message: `Un usuario ha solicitado unirse a ${team.name}`,
        type: 'team_invite'
      });
      emitToUser(team.created_by_user_id, 'notification', notif.toJSON());
    } catch (_) {}
    return res.status(201).json(reqRow);
  } catch (err) {
    if (err &amp;&amp; err.name === 'SequelizeUniqueConstraintError') {
      return res.status(400).json({ error: 'Ya solicitaste unirte a este equipo' });
    }
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Approve a join request (team owner only).
 *
 * @route POST /api/teams/requests/:requestId/approve
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const approveJoinRequest = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const requestId = Number(req.params.requestId);
    const jr = await TeamJoinRequest.findByPk(requestId);
    if (!jr) return res.status(404).json({ error: 'Solicitud no encontrada' });

    const team = await Team.findByPk(jr.team_id);
    if (!team) return res.status(404).json({ error: 'Team not found' });
    if (team.created_by_user_id !== userId) return res.status(403).json({ error: 'Solo el propietario del equipo puede aprobar' });
    if (jr.status !== 'pending') return res.status(400).json({ error: 'La solicitud no está pendiente' });

    // Ensure the user still isn't member of any team
    const existing = await TeamMembers.findOne({ where: { user_id: jr.user_id, left_at: null } });
    if (existing) return res.status(400).json({ error: 'El usuario ya pertenece a un equipo' });

    await TeamMembers.create({ team_id: jr.team_id, user_id: jr.user_id, role: 'member', joined_at: new Date(), left_at: null });
    await jr.update({ status: 'approved' });

    // Notify the user about approval
    try {
      const notif = await Notification.create({
        user_id: jr.user_id,
        title: 'Solicitud aprobada',
        message: 'Tu solicitud para unirte al equipo ha sido aprobada',
        type: 'team_invite'
      });
      emitToUser(jr.user_id, 'notification', notif.toJSON());
    } catch (_) {}
    return res.json({ success: true });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Register a team into a competition.
 *
 * Creates a `Registration` row with status `pending`.
 *
 * @route POST /api/teams/:id/register-competition
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const registerTeamInCompetition = async (req, res) => {
  try {
    const teamId = Number(req.params.id);
    const { competition_id } = req.body || {};
    if (!competition_id) return res.status(400).json({ error: 'competition_id requerido' });

    const team = await Team.findByPk(teamId);
    if (!team) return res.status(404).json({ error: 'Team not found' });
    const comp = await Competition.findByPk(competition_id);
    if (!comp) return res.status(404).json({ error: 'Competition not found' });

    const existing = await Registration.findOne({ where: { team_id: teamId, competition_id } });
    if (existing) return res.status(400).json({ error: 'El equipo ya está registrado en esta competición' });

    const reg = await Registration.create({ team_id: teamId, competition_id, status: 'pending', registration_date: new Date() });
    return res.status(201).json(reg);
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Return the team the current user belongs to (or null).
 *
 * @route GET /api/teams/mine
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const getMyTeam = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });

    // Find active membership
    const membership = await TeamMembers.findOne({ 
      where: { user_id: userId, left_at: null } 
    });

    if (!membership) {
      // Fallback: check if they own a team (legacy/safety check)
      const owned = await Team.findOne({ where: { created_by_user_id: userId } });
      if (owned) return res.json(owned);
      return res.json(null);
    }

    const team = await Team.findByPk(membership.team_id);
    return res.json(team || null);
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * List join requests for a team (owner only via middleware).
 *
 * @route GET /api/teams/:id/requests
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const listJoinRequests = async (req, res) => {
  try {
    const teamId = Number(req.params.id);
    const items = await TeamJoinRequest.findAll({ where: { team_id: teamId }, order: [['created_at', 'DESC']] });
    const userIds = [...new Set(items.map(i => i.user_id))];
    let usersById = {};
    if (userIds.length) {
      const users = await User.findAll({ where: { id: { [Op.in]: userIds } }, attributes: ['id', 'username', 'email', 'first_name', 'last_name'] });
      usersById = Object.fromEntries(users.map(u => [u.id, u]));
    }
    const enriched = items.map(i => {
      const u = usersById[i.user_id];
      const plain = i.toJSON();
      return { ...plain, user_username: u?.username || null, user_email: u?.email || null, user_name: u ? `${u.first_name || ''} ${u.last_name || ''}`.trim() : null };
    });
    return res.json(enriched);
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Leave the current team (non-owner only).
 *
 * @route POST /api/teams/leave
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const leaveTeam = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const membership = await TeamMembers.findOne({ where: { user_id: userId, left_at: null } });
    if (!membership) return res.status(400).json({ error: 'No perteneces a ningún equipo' });
    const team = await Team.findByPk(membership.team_id);
    if (!team) return res.status(404).json({ error: 'Team not found' });
    if (team.created_by_user_id === userId) return res.status(400).json({ error: 'El propietario no puede salir del equipo' });
    await membership.update({ left_at: new Date() });
    return res.json({ success: true });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};

/**
 * Get the current user's membership/ownership status.
 *
 * @route GET /api/teams/status
 * @param {Express.Request} req
 * @param {Express.Response} res
 * @returns {Promise&lt;void>}
 */
export const getMembershipStatus = async (req, res) => {
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ error: 'No autorizado' });
    const owned = await Team.findOne({ where: { created_by_user_id: userId } });
    const membership = await TeamMembers.findOne({ where: { user_id: userId, left_at: null } });
    return res.json({
      ownsTeam: Boolean(owned),
      ownedTeamId: owned ? owned.id : null,
      memberOfTeamId: membership ? membership.team_id : null
    });
  } catch (err) {
    return res.status(500).json({ error: err.message });
  }
};
</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-context_AuthContext.html">context/AuthContext</a></div><div class="sidebar-section-children"><a href="module-context_SocketContext.html">context/SocketContext</a></div><div class="sidebar-section-children"><a href="module-hooks_useApi.html">hooks/useApi</a></div><div class="sidebar-section-children"><a href="module-hooks_useAuth.html">hooks/useAuth</a></div><div class="sidebar-section-children"><a href="module-hooks_useTeams.html">hooks/useTeams</a></div><div class="sidebar-section-children"><a href="module-models_Competition.html">models/Competition</a></div><div class="sidebar-section-children"><a href="module-models_Team.html">models/Team</a></div><div class="sidebar-section-children"><a href="module-models_User.html">models/User</a></div><div class="sidebar-section-children"><a href="module-utils_push.html">utils/push</a></div><div class="sidebar-section-children"><a href="module-utils_scheduler.html">utils/scheduler</a></div><div class="sidebar-section-children"><a href="module-utils_systemLogger.html">utils/systemLogger</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-utils_systemLogger-SystemLogger.html">SystemLogger</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#NotificationMeta">NotificationMeta</a></div><div class="sidebar-section-children"><a href="global.html#PushPayload">PushPayload</a></div><div class="sidebar-section-children"><a href="global.html#RateLimitOptions">RateLimitOptions</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Request">Request</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#Response">Response</a></div><div class="sidebar-section-children"><a href="global.html#SendEmailResult">SendEmailResult</a></div><div class="sidebar-section-children"><a href="global.html#SessionUser">SessionUser</a></div><div class="sidebar-section-children"><a href="global.html#UploadFieldDefinition">UploadFieldDefinition</a></div><div class="sidebar-section-children"><a href="global.html#UploadedFileInfo">UploadedFileInfo</a></div><div class="sidebar-section-children"><a href="global.html#acceptInvite">acceptInvite</a></div><div class="sidebar-section-children"><a href="global.html#addComment">addComment</a></div><div class="sidebar-section-children"><a href="global.html#addFavoriteCompetition">addFavoriteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#addLdapUser">addLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#apiRequest">apiRequest</a></div><div class="sidebar-section-children"><a href="global.html#approveJoinRequest">approveJoinRequest</a></div><div class="sidebar-section-children"><a href="global.html#approveRegistration">approveRegistration</a></div><div class="sidebar-section-children"><a href="global.html#canUseNotifications">canUseNotifications</a></div><div class="sidebar-section-children"><a href="global.html#changePassword">changePassword</a></div><div class="sidebar-section-children"><a href="global.html#cn">cn</a></div><div class="sidebar-section-children"><a href="global.html#createCountry">createCountry</a></div><div class="sidebar-section-children"><a href="global.html#createGalleryItem">createGalleryItem</a></div><div class="sidebar-section-children"><a href="global.html#createLogEntry">createLogEntry</a></div><div class="sidebar-section-children"><a href="global.html#createNotification">createNotification</a></div><div class="sidebar-section-children"><a href="global.html#createPost">createPost</a></div><div class="sidebar-section-children"><a href="global.html#createRegistration">createRegistration</a></div><div class="sidebar-section-children"><a href="global.html#createSponsor">createSponsor</a></div><div class="sidebar-section-children"><a href="global.html#createStream">createStream</a></div><div class="sidebar-section-children"><a href="global.html#createTeam">createTeam</a></div><div class="sidebar-section-children"><a href="global.html#createTeamMember">createTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#createUser">createUser</a></div><div class="sidebar-section-children"><a href="global.html#declineInvite">declineInvite</a></div><div class="sidebar-section-children"><a href="global.html#decodeIfBase64">decodeIfBase64</a></div><div class="sidebar-section-children"><a href="global.html#deleteCompetition">deleteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#deleteCountry">deleteCountry</a></div><div class="sidebar-section-children"><a href="global.html#deleteGalleryItem">deleteGalleryItem</a></div><div class="sidebar-section-children"><a href="global.html#deleteKey">deleteKey</a></div><div class="sidebar-section-children"><a href="global.html#deleteLdapUser">deleteLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#deleteLogEntry">deleteLogEntry</a></div><div class="sidebar-section-children"><a href="global.html#deleteMedia">deleteMedia</a></div><div class="sidebar-section-children"><a href="global.html#deleteNotification">deleteNotification</a></div><div class="sidebar-section-children"><a href="global.html#deleteOldLogs">deleteOldLogs</a></div><div class="sidebar-section-children"><a href="global.html#deletePost">deletePost</a></div><div class="sidebar-section-children"><a href="global.html#deleteRegistration">deleteRegistration</a></div><div class="sidebar-section-children"><a href="global.html#deleteRobotFile">deleteRobotFile</a></div><div class="sidebar-section-children"><a href="global.html#deleteSelf">deleteSelf</a></div><div class="sidebar-section-children"><a href="global.html#deleteSponsor">deleteSponsor</a></div><div class="sidebar-section-children"><a href="global.html#deleteStream">deleteStream</a></div><div class="sidebar-section-children"><a href="global.html#deleteTeam">deleteTeam</a></div><div class="sidebar-section-children"><a href="global.html#deleteTeamMember">deleteTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#deleteUser">deleteUser</a></div><div class="sidebar-section-children"><a href="global.html#emitToUser">emitToUser</a></div><div class="sidebar-section-children"><a href="global.html#exportRegistrationsCSV">exportRegistrationsCSV</a></div><div class="sidebar-section-children"><a href="global.html#forgotPassword">forgotPassword</a></div><div class="sidebar-section-children"><a href="global.html#form">form</a></div><div class="sidebar-section-children"><a href="global.html#getApiOrigin">getApiOrigin</a></div><div class="sidebar-section-children"><a href="global.html#getComments">getComments</a></div><div class="sidebar-section-children"><a href="global.html#getCompetitionById">getCompetitionById</a></div><div class="sidebar-section-children"><a href="global.html#getCompetitions">getCompetitions</a></div><div class="sidebar-section-children"><a href="global.html#getCountries">getCountries</a></div><div class="sidebar-section-children"><a href="global.html#getCountryById">getCountryById</a></div><div class="sidebar-section-children"><a href="global.html#getFileInfo">getFileInfo</a></div><div class="sidebar-section-children"><a href="global.html#getIO">getIO</a></div><div class="sidebar-section-children"><a href="global.html#getKeyInfo">getKeyInfo</a></div><div class="sidebar-section-children"><a href="global.html#getMediaById">getMediaById</a></div><div class="sidebar-section-children"><a href="global.html#getMembershipStatus">getMembershipStatus</a></div><div class="sidebar-section-children"><a href="global.html#getMessages">getMessages</a></div><div class="sidebar-section-children"><a href="global.html#getMyTeam">getMyTeam</a></div><div class="sidebar-section-children"><a href="global.html#getNotificationById">getNotificationById</a></div><div class="sidebar-section-children"><a href="global.html#getNotifications">getNotifications</a></div><div class="sidebar-section-children"><a href="global.html#getOverview">getOverview</a></div><div class="sidebar-section-children"><a href="global.html#getPostById">getPostById</a></div><div class="sidebar-section-children"><a href="global.html#getPosts">getPosts</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrationById">getRegistrationById</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrationStats">getRegistrationStats</a></div><div class="sidebar-section-children"><a href="global.html#getRegistrations">getRegistrations</a></div><div class="sidebar-section-children"><a href="global.html#getResendClient">getResendClient</a></div><div class="sidebar-section-children"><a href="global.html#getRobotFiles">getRobotFiles</a></div><div class="sidebar-section-children"><a href="global.html#getSelf">getSelf</a></div><div class="sidebar-section-children"><a href="global.html#getSponsorById">getSponsorById</a></div><div class="sidebar-section-children"><a href="global.html#getSponsors">getSponsors</a></div><div class="sidebar-section-children"><a href="global.html#getStreamById">getStreamById</a></div><div class="sidebar-section-children"><a href="global.html#getStreams">getStreams</a></div><div class="sidebar-section-children"><a href="global.html#getSystemLogById">getSystemLogById</a></div><div class="sidebar-section-children"><a href="global.html#getSystemLogs">getSystemLogs</a></div><div class="sidebar-section-children"><a href="global.html#getSystemStats">getSystemStats</a></div><div class="sidebar-section-children"><a href="global.html#getTeamById">getTeamById</a></div><div class="sidebar-section-children"><a href="global.html#getTeamLogs">getTeamLogs</a></div><div class="sidebar-section-children"><a href="global.html#getTeamMemberById">getTeamMemberById</a></div><div class="sidebar-section-children"><a href="global.html#getTeamMembers">getTeamMembers</a></div><div class="sidebar-section-children"><a href="global.html#getTeams">getTeams</a></div><div class="sidebar-section-children"><a href="global.html#getUserById">getUserById</a></div><div class="sidebar-section-children"><a href="global.html#getUsers">getUsers</a></div><div class="sidebar-section-children"><a href="global.html#getUsersByRole">getUsersByRole</a></div><div class="sidebar-section-children"><a href="global.html#getUsersTimeline">getUsersTimeline</a></div><div class="sidebar-section-children"><a href="global.html#getVapidPublicKey">getVapidPublicKey</a></div><div class="sidebar-section-children"><a href="global.html#handleUploadErrors">handleUploadErrors</a></div><div class="sidebar-section-children"><a href="global.html#inviteToTeam">inviteToTeam</a></div><div class="sidebar-section-children"><a href="global.html#leaveTeam">leaveTeam</a></div><div class="sidebar-section-children"><a href="global.html#list">list</a></div><div class="sidebar-section-children"><a href="global.html#listFavoriteCompetitions">listFavoriteCompetitions</a></div><div class="sidebar-section-children"><a href="global.html#listGallery">listGallery</a></div><div class="sidebar-section-children"><a href="global.html#listJoinRequests">listJoinRequests</a></div><div class="sidebar-section-children"><a href="global.html#listKeys">listKeys</a></div><div class="sidebar-section-children"><a href="global.html#listLdapUsers">listLdapUsers</a></div><div class="sidebar-section-children"><a href="global.html#login">login</a></div><div class="sidebar-section-children"><a href="global.html#logout">logout</a></div><div class="sidebar-section-children"><a href="global.html#me">me</a></div><div class="sidebar-section-children"><a href="global.html#normalizeBase">normalizeBase</a></div><div class="sidebar-section-children"><a href="global.html#parseResponse">parseResponse</a></div><div class="sidebar-section-children"><a href="global.html#redirectIfAuthenticated">redirectIfAuthenticated</a></div><div class="sidebar-section-children"><a href="global.html#reducer">reducer</a></div><div class="sidebar-section-children"><a href="global.html#register">register</a></div><div class="sidebar-section-children"><a href="global.html#registerTeamInCompetition">registerTeamInCompetition</a></div><div class="sidebar-section-children"><a href="global.html#rejectRegistration">rejectRegistration</a></div><div class="sidebar-section-children"><a href="global.html#remove">remove</a></div><div class="sidebar-section-children"><a href="global.html#removeFavoriteCompetition">removeFavoriteCompetition</a></div><div class="sidebar-section-children"><a href="global.html#renderAddLdapUser">renderAddLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#renderEditLdapUser">renderEditLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#requestJoinTeam">requestJoinTeam</a></div><div class="sidebar-section-children"><a href="global.html#requestNotificationPermission">requestNotificationPermission</a></div><div class="sidebar-section-children"><a href="global.html#requireAdminSession">requireAdminSession</a></div><div class="sidebar-section-children"><a href="global.html#requireOwnership">requireOwnership</a></div><div class="sidebar-section-children"><a href="global.html#requireRole">requireRole</a></div><div class="sidebar-section-children"><a href="global.html#resetPassword">resetPassword</a></div><div class="sidebar-section-children"><a href="global.html#resolveMediaUrl">resolveMediaUrl</a></div><div class="sidebar-section-children"><a href="global.html#save">save</a></div><div class="sidebar-section-children"><a href="global.html#searchUsers">searchUsers</a></div><div class="sidebar-section-children"><a href="global.html#sendMessage">sendMessage</a></div><div class="sidebar-section-children"><a href="global.html#sendPasswordResetCodeEmail">sendPasswordResetCodeEmail</a></div><div class="sidebar-section-children"><a href="global.html#sendTestPush">sendTestPush</a></div><div class="sidebar-section-children"><a href="global.html#setIO">setIO</a></div><div class="sidebar-section-children"><a href="global.html#showNotification">showNotification</a></div><div class="sidebar-section-children"><a href="global.html#subscribePush">subscribePush</a></div><div class="sidebar-section-children"><a href="global.html#subscribeToPush">subscribeToPush</a></div><div class="sidebar-section-children"><a href="global.html#toggleFileVisibility">toggleFileVisibility</a></div><div class="sidebar-section-children"><a href="global.html#toggleLike">toggleLike</a></div><div class="sidebar-section-children"><a href="global.html#togglePin">togglePin</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribeFromPush">unsubscribeFromPush</a></div><div class="sidebar-section-children"><a href="global.html#unsubscribePush">unsubscribePush</a></div><div class="sidebar-section-children"><a href="global.html#updateCompetition">updateCompetition</a></div><div class="sidebar-section-children"><a href="global.html#updateCountry">updateCountry</a></div><div class="sidebar-section-children"><a href="global.html#updateLdapUser">updateLdapUser</a></div><div class="sidebar-section-children"><a href="global.html#updateNotification">updateNotification</a></div><div class="sidebar-section-children"><a href="global.html#updatePost">updatePost</a></div><div class="sidebar-section-children"><a href="global.html#updateRegistration">updateRegistration</a></div><div class="sidebar-section-children"><a href="global.html#updateSelf">updateSelf</a></div><div class="sidebar-section-children"><a href="global.html#updateSponsor">updateSponsor</a></div><div class="sidebar-section-children"><a href="global.html#updateStream">updateStream</a></div><div class="sidebar-section-children"><a href="global.html#updateTeam">updateTeam</a></div><div class="sidebar-section-children"><a href="global.html#updateTeamMember">updateTeamMember</a></div><div class="sidebar-section-children"><a href="global.html#updateUser">updateUser</a></div><div class="sidebar-section-children"><a href="global.html#uploadMedia">uploadMedia</a></div><div class="sidebar-section-children"><a href="global.html#uploadMiddleware">uploadMiddleware</a></div><div class="sidebar-section-children"><a href="global.html#uploadRobotFile">uploadRobotFile</a></div><div class="sidebar-section-children"><a href="global.html#useCountries">useCountries</a></div><div class="sidebar-section-children"><a href="global.html#useToast">useToast</a></div><div class="sidebar-section-children"><a href="global.html#validatePasswordStrength">validatePasswordStrength</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>