@startuml Component Diagram
!define Database(name) database name <<Database>> #LightBlue
!define External(name) component name <<External Service>> #LightGreen
!define Web(name) component name <<Web Component>> #LightYellow
!define API(name) component name <<API>> #LightCoral
!define Service(name) component name <<Service>> #LightPink

' External Systems
External(OpenLDAP) as LDAP
External(Bind9_DNS) as DNS
External(MySQL_Server) as MYSQL_EXT [
MySQL Server
External Database
]

' Frontend Layer
Web(React_Frontend) as REACT [
React Application
User Interface
- Team Dashboard
- Competition View
- Live Streams
- User Profile
]

Web(EJS_Admin_Panel) as EJS [
EJS Admin Panel
Administrative Interface
- User Management
- Competition Setup
- System Monitoring
- LDAP Integration
]

' API Layer
API(Express_API) as API [
Express.js REST API
Business Logic Layer
- Authentication & Authorization
- CRUD Operations
- File Upload Handling
- Real-time Notifications
]

' Services Layer
Service(Auth_Service) as AUTH [
Authentication Service
- JWT Token Management
- Session Handling
- Password Hashing
- Role-based Access
]

Service(LDAP_Service) as LDAP_SVC [
LDAP Integration Service
- User Synchronization
- Directory Operations
- Authentication Proxy
]

Service(Email_Service) as EMAIL [
Email Notification Service
- Welcome Emails
- Team Invitations
- System Notifications
]

Service(File_Service) as FILE [
File Management Service
- Upload Processing
- Media Storage
- File Validation
]

' Database Layer
Database(MySQL_Database) as DB [
MySQL Database
Data Persistence Layer
- User Accounts
- Teams & Competitions
- Posts & Comments
- Audit Logs
]

' Infrastructure
Service(Nginx_Proxy) as NGINX [
Nginx Reverse Proxy
Load Balancer & SSL
- Request Routing
- SSL Termination
- Static File Serving
]

Service(Redis_Cache) as REDIS [
Redis Cache (Future)
Session Store & Caching
- Session Management
- Query Result Cache
- Rate Limiting
]

' Relationships
REACT --> API : HTTPS/REST API
EJS --> API : HTTPS/REST API

API --> AUTH : Authentication
API --> LDAP_SVC : LDAP Operations
API --> EMAIL : Email Sending
API --> FILE : File Operations

AUTH --> DB : User Validation
LDAP_SVC --> LDAP : Directory Access
EMAIL --> DNS : MX Records
FILE --> DB : File Metadata

API --> DB : Data Operations

NGINX --> REACT : Static Files
NGINX --> EJS : Admin Routes
NGINX --> API : API Routes

API --> REDIS : Session Store (Future)

' External Connections
LDAP --> DNS : DNS Resolution
MYSQL_EXT --> DB : Database Access (Dev/Prod)

' Data Flow
note right of REACT : User Actions\n- Login/Logout\n- Team Management\n- Competition Registration
note right of EJS : Admin Actions\n- User Management\n- System Configuration\n- LDAP User Creation
note right of API : Business Logic\n- Data Validation\n- Business Rules\n- API Responses
note right of DB : Data Storage\n- Persistent Data\n- Relationships\n- Audit Trail

' Security Boundaries
note as SecurityNote
Security Layers:
- JWT Authentication
- Session Management
- CSRF Protection
- Rate Limiting
- Input Validation
- SQL Injection Prevention
end note

@enduml