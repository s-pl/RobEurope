# ============================================================
# RobEurope — Staging overrides
#
# Usar junto con docker-compose.yml:
#   docker compose -p robeurope-staging \
#     -f docker-compose.yml \
#     -f docker-compose.staging.yml \
#     --profile prod [comando]
#
# Diferencias respecto a producción:
#   • MySQL en el puerto 3307 (evita conflicto con prod :3306)
#   • Redis  en el puerto 6380 (evita conflicto con prod :6379)
#   • Backend en el puerto 8585 (evita conflicto con prod :85)
#   • Volúmenes propios (staging_mysql_data, staging_uploads, etc.)
#   • Base de datos: robeurope_staging
# ============================================================

services:

  mysql:
    container_name: robeurope-mysql-staging
    ports:
      - "3307:3306"
    volumes:
      - staging_mysql_data:/var/lib/mysql

  redis:
    container_name: robeurope-redis-staging
    ports:
      - "6380:6379"
    volumes:
      - staging_redis_data:/data

  backend:
    container_name: robeurope-backend-staging
    environment:
      DB_NAME_PROD: robeurope_staging
    ports:
      - "8585:85"
    volumes:
      - staging_uploads:/app/uploads

volumes:
  staging_mysql_data:
  staging_redis_data:
  staging_uploads:
